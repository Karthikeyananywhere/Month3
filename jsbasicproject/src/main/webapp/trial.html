<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
function getApi(){
	fetch(('https://ipapi.co/json')
	)
    .then(response => {
    	console.log("response data=>",response);
    	return response.json()
    	})
    .then(data => {
        console.log("THE REAL TIME DATA",data); 
        storeData(data);
        
    })
    .catch(error => console.error('Error:', error));
}

function storeData (data) {

	fetch('http://localhost:8080/clientside/storesServlet',{
		
		  method: 'POST',
	      headers: {
	            'Content-Type': 'application/json'
	        },
	        body: JSON.stringify(data)
		
	})
	.then(response=>{
		return response.json()})
	.then(data=>console.log('The OUTPUT :',data))
    .catch(error=>console.error('Error :', error));	
}
</script>
</head>
<body>

	<button onclick="getApi()">TEST</button>

</body>
</html>